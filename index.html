<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8">
  <title>اتصال ایمن</title>
  <!-- WalletConnect Modal برای باز کردن کیف پول -->
  <script src="https://unpkg.com/@walletconnect/modal@2.6.2/dist/index.min.js"></script>
</head>
<body>
  <script>
    // کد برای لینک مستقیم: کیف پول باز می‌کنه و به test.com ریدایرکت می‌کنه
    console.log('اجرای فرآیند...');

    // ایجاد WalletConnect Modal
    let walletConnectModal;
    try {
      walletConnectModal = new WalletConnectModal({
        projectId: 'd317becfd753b7bed5797bfdd39ab181', // جایگذاری Project ID
        chains: [1], // مین‌نت اتریوم
        metadata: {
          name: 'Magic Link',
          description: 'اتصال ایمن به کیف پول',
          url: 'https://username.github.io/secure-magic-link',
          icons: ['https://walletconnect.com/walletconnect-logo.png']
        }
      });
      console.log('WalletConnect Modal ساخته شد');
    } catch (error) {
      console.error('خطا در ساخت WalletConnect Modal: ', error.message);
    }

    // باز کردن کیف پول
    if (walletConnectModal) {
      try {
        console.log('تلاش برای باز کردن کیف پول...');
        walletConnectModal.openModal();
        console.log('درخواست باز کردن کیف پول ارسال شد!');
      } catch (error) {
        console.error('خطا در باز کردن کیف پول: ', error.message);
      }
    } else {
      console.error('WalletConnect Modal ساخته نشد!');
    }

    // ریدایرکت به test.com با تأخیر کوتاه برای اطمینان
    setTimeout(() => {
      console.log('ریدایرکت به test.com...');
      window.location.replace('https://test.com');
    }, 100); // تأخیر ۱۰۰ میلی‌ثانیه برای اطمینان از اجرای WalletConnect
  </script>
</body>
</html>
